{
  "version": 3,
  "sources": ["../../src/libs/css-magi.js", "../../src/js/css.js"],
  "sourcesContent": ["export const id6 = () => 'v1-' + Math.random().toString(36).substring(2, 8);\r\n\r\n\r\nexport const PSEUDO_SELECTORS = [\r\n  'hover', 'focus', 'active', 'visited', 'after', 'before',\r\n  'first', 'last', 'nth-child', 'nth-last-child', 'nth-of-type', 'nth-last-of-type',\r\n  'only-child', 'only-of-type', 'empty', 'target', 'checked', 'disabled', 'enabled',\r\n  'required', 'optional', 'valid', 'invalid', 'in-range', 'out-of-range',\r\n  'read-only', 'read-write', 'placeholder-shown', 'autofill', 'user-invalid',\r\n  'user-valid', 'blank', 'valid', 'invalid', 'in-range', 'out-of-range',\r\n  'read-only', 'read-write', 'placeholder-shown', 'autofill', 'user-invalid',\r\n];\r\n\r\nexport const cssPropertyMapping = {\r\n  m: 'margin',\r\n  mt: 'margin-top',\r\n  mr: 'margin-right',\r\n  mb: 'margin-bottom',\r\n  ml: 'margin-left',\r\n\r\n  p: 'padding',\r\n  pt: 'padding-top',\r\n  pr: 'padding-right',\r\n  pb: 'padding-bottom',\r\n  pl: 'padding-left',\r\n\r\n  w: 'width',\r\n  h: 'height',\r\n\r\n  bg: 'background',\r\n  \"bg-color\": \"background-color\",\r\n\r\n  z: 'z-index',\r\n\r\n  d: 'display',\r\n  direction: 'flex-direction'\r\n};\r\n\r\nexport const DEFAULT_MEDIA_QUERY = {\r\n  sm: '@media(min-width:640px)',\r\n  md: '@media(min-width:768px)',\r\n  lg: '@media(min-width:1024px)',\r\n  xl: '@media(min-width:1280px)',\r\n  xxl: '@media(min-width:1536px)',\r\n};\r\n\r\nexport function parseDOM(configs = {\r\n  mode: 'development',\r\n  mediaQuery: DEFAULT_MEDIA_QUERY\r\n}) {\r\n  if (typeof document === \"undefined\") {\r\n    console.warn(\"parseDOM() only works in the browser environment.\");\r\n    return {};\r\n  }\r\n\r\n  const defineClasses = Array.from(document.querySelectorAll(\"[class]\"))\r\n    .flatMap(el => Array.from(el.classList).filter(cls => cls.includes(\":\")));\r\n\r\n  const uniqueClasses = useUniqueClass({ classList: defineClasses, configs: configs });\r\n\r\n  return uniqueClasses;\r\n}\r\n\r\nexport function parseFile(classFromCodes, configs = {\r\n  mode: 'development',\r\n  mediaQuery: DEFAULT_MEDIA_QUERY\r\n}) {\r\n  const defineClasses = Array.from(classFromCodes).filter(cls => cls.includes(\":\"));\r\n  const uniqueClasses = useUniqueClass({ classList: defineClasses, configs: configs });\r\n\r\n  return uniqueClasses;\r\n}\r\n\r\nconst useUniqueClass = ({\r\n  classList,\r\n  configs = {\r\n    mode: 'development',\r\n    mediaQuery: DEFAULT_MEDIA_QUERY\r\n  }\r\n}) => {\r\n  return classList.reduce((acc, cls) => {\r\n    const { className: classExcludedMedia, media } = useMediaQuery(cls, configs?.mediaQuery || DEFAULT_MEDIA_QUERY);\r\n    const { className: classExcludedPseudo, pseudoSelector } = usePseudoSelector(classExcludedMedia, configs);\r\n    const { value, property, cssQuery, queryId } = useClassString(classExcludedPseudo, cls);\r\n\r\n    if (acc[cssQuery]) return acc;\r\n\r\n    if (configs.mode === 'production') {\r\n      document.querySelectorAll(`.${cssQuery}`).forEach(el => {\r\n        el.classList.add(queryId);\r\n        el.classList.remove(cls);\r\n      });\r\n    }\r\n\r\n    if (pseudoSelector) {\r\n      acc[cssQuery] = {\r\n        media: media,\r\n        query: [(configs.mode === 'production' ? queryId : cssQuery), pseudoSelector].join(':'),\r\n        property: cssPropertyMapping[property] || property,\r\n        value: value.replace(/[\\[\\]]/g, \"\").replace(/_/g, \" \")\r\n      };\r\n    } else {\r\n      acc[cssQuery] = {\r\n        media: media,\r\n        query: configs.mode === 'production' ? queryId : cssQuery,\r\n        property: cssPropertyMapping[property] || property,\r\n        value: value.replace(/[\\[\\]]/g, \"\").replace(/_/g, \" \")\r\n      };\r\n    }\r\n\r\n    return acc;\r\n  }, {});\r\n}\r\n\r\n\r\nconst useMediaQuery = (_className, mediaQuery) => {\r\n  let className = _className;\r\n  Object.entries(mediaQuery).forEach(([key, value]) => {\r\n    className = className.replace(`${key}:`, value + ':');\r\n  });\r\n\r\n  const result = {\r\n    media: null,\r\n    className: className,\r\n  };\r\n\r\n  const match = className.match(/@media\\([^)]*\\)/);\r\n  if (match) {\r\n    result.media = match[0];\r\n    result.className = className.replace(`${match[0]}:`, '');\r\n  }\r\n  return result;\r\n\r\n}\r\n\r\nconst usePseudoSelector = (className, configs) => {\r\n  const result = {\r\n    pseudoSelector: null,\r\n    className: className,\r\n  };\r\n\r\n  const pseudoSelector = [\r\n    ...PSEUDO_SELECTORS,\r\n    ...configs?.pseudoSelectors || []\r\n  ].find(p => className.includes(p + ':'));\r\n\r\n  if (pseudoSelector) {\r\n    result.pseudoSelector = pseudoSelector;\r\n    result.className = className.replace(`${pseudoSelector}:`, '');\r\n  }\r\n  return result;\r\n}\r\n\r\nconst useClassString = (className, clsOriginal) => {\r\n  const [classString, value] = className.split(/:(.+)/); // scroll-1.background:[red] => scroll-1.background, [red]\r\n  const classList = classString.split('.'); // [scroll-1, background]\r\n  const property = classList.pop(); // background\r\n  const cssQuery = [...classList, clsOriginal.replace(/[^a-zA-Z0-9_-]/g, (char) => '\\\\' + char)].join('.');\r\n\r\n  return {\r\n    value,\r\n    property,\r\n    cssQuery,\r\n    queryId: id6(),\r\n  };\r\n}\r\n\r\nexport function injectStyles(uniqueClasses) {\r\n  if (typeof document === \"undefined\") return;\r\n\r\n  const tag = document.createElement(\"style\");\r\n  tag.innerHTML = Object.entries(uniqueClasses)\r\n    .map(([_, { media, query, property, value }]) =>\r\n      media ? `${media}{.${query}{${property}:${value};}}` : `.${query}{${property}:${value};}`\r\n    )\r\n    .join(\"\");\r\n\r\n  document.body.appendChild(tag);\r\n}\r\n\r\nexport function init() {\r\n  const uniqueClasses = parseDOM();\r\n  injectStyles(uniqueClasses);\r\n}", "import { init, parseDOM, injectStyles } from '../libs/css-magi';\r\n\r\nconst uniqueClasses = parseDOM({});\r\ninjectStyles(uniqueClasses);\r\n\r\n\r\nnew EventSource('/esbuild').addEventListener('change', () => {\r\n  location.reload();\r\n});"],
  "mappings": "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",
  "names": ["id6", "PSEUDO_SELECTORS", "cssPropertyMapping", "DEFAULT_MEDIA_QUERY", "parseDOM", "configs", "defineClasses", "el", "cls", "useUniqueClass", "useUniqueClass", "classList", "configs", "DEFAULT_MEDIA_QUERY", "acc", "cls", "classExcludedMedia", "media", "useMediaQuery", "classExcludedPseudo", "pseudoSelector", "usePseudoSelector", "value", "property", "cssQuery", "queryId", "useClassString", "el", "cssPropertyMapping", "_className", "mediaQuery", "className", "key", "result", "match", "PSEUDO_SELECTORS", "p", "clsOriginal", "classString", "char", "id6", "injectStyles", "uniqueClasses", "tag", "_", "query", "uniqueClasses", "parseDOM", "injectStyles"]
}
