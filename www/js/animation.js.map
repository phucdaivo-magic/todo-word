{
  "version": 3,
  "sources": ["../../src/js/animation.jsx"],
  "sourcesContent": ["/**\r\n * ES Animation Component\r\n * A custom web component for scroll-based animations\r\n *\r\n * Attributes:\r\n * - max-steps: Maximum animation steps (default: 10)\r\n * - initial-step: Starting step (default: 0)\r\n * - debounce-time: Debounce delay in ms (default: 50)\r\n * - scroll-sensitivity: Pixels to scroll per step (default: 100)\r\n * - animation-speed: Animation transition speed (default: 'normal')\r\n *\r\n * Usage:\r\n * <es-animation max-steps=\"10\" initial-step=\"0\">\r\n *   <div class=\"es-animation-item\">Content</div>\r\n * </es-animation>\r\n */\r\n\r\n/**\r\n * Debounce utility function\r\n * Delays function execution until after wait time has elapsed\r\n * @param {Function} func - Function to debounce\r\n * @param {number} wait - Wait time in milliseconds\r\n * @returns {Function} Debounced function\r\n */\r\nconst debounce = (func, wait) => {\r\n  let timeout;\r\n  return function executedFunction(...args) {\r\n    const later = () => {\r\n      clearTimeout(timeout);\r\n      func.apply(this, args);\r\n    };\r\n    clearTimeout(timeout);\r\n    timeout = setTimeout(later, wait);\r\n  };\r\n};\r\n\r\n/**\r\n * Throttle utility function\r\n * Ensures function is called at most once per specified time period\r\n * @param {Function} func - Function to throttle\r\n * @param {number} limit - Time limit in milliseconds\r\n * @returns {Function} Throttled function\r\n */\r\nconst throttle = (func, limit) => {\r\n  let inThrottle;\r\n  return function (...args) {\r\n    if (!inThrottle) {\r\n      func.apply(this, args);\r\n      inThrottle = true;\r\n      setTimeout(() => (inThrottle = false), limit);\r\n    }\r\n  };\r\n};\r\n\r\nclass EsAnimation extends HTMLElement {\r\n  constructor() {\r\n    super();\r\n\r\n    // Configuration\r\n    this.config = {\r\n      maxSteps: 10,\r\n      initialStep: 0,\r\n      debounceTime: 50,\r\n      scrollSensitivity: 100,\r\n      animationSpeed: \"normal\",\r\n    };\r\n\r\n    // State\r\n    this.currentStep = 0;\r\n    this.isAnimating = false;\r\n    this.animationItems = [];\r\n\r\n    // Bound methods for event listeners\r\n    this.boundHandleWheel = null;\r\n    this.boundHandleKeyboard = null;\r\n\r\n    // Performance tracking\r\n    this.lastScrollTime = 0;\r\n    this.scrollAccumulator = 0;\r\n  }\r\n\r\n  /**\r\n   * Called when element is inserted into DOM\r\n   */\r\n  connectedCallback() {\r\n    this.init();\r\n    this.registerEvents();\r\n    this.updateAnimation();\r\n\r\n    if (this.hasAttribute(\"debug\")) {\r\n      console.log(\"ES Animation initialized:\", {\r\n        config: this.config,\r\n        items: this.animationItems.length,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Called when element is removed from DOM\r\n   */\r\n  disconnectedCallback() {\r\n    this.cleanup();\r\n  }\r\n\r\n  /**\r\n   * Initialize component\r\n   */\r\n  init() {\r\n    // Parse attributes\r\n    this.parseAttributes();\r\n\r\n    // Get animation items\r\n    this.animationItems = Array.from(\r\n      this.querySelectorAll(\".es-animation-item\")\r\n    );\r\n\r\n    if (this.animationItems.length === 0) {\r\n      console.warn(\"ES Animation: No .es-animation-item elements found\");\r\n    }\r\n\r\n    // Set initial step\r\n    this.currentStep = this.config.initialStep;\r\n\r\n    // Add container class\r\n    this.classList.add(\"es-animation-container\");\r\n\r\n    // Set animation speed\r\n    this.style.setProperty(\"--animation-speed\", this.getAnimationSpeed());\r\n  }\r\n\r\n  /**\r\n   * Parse component attributes\r\n   */\r\n  parseAttributes() {\r\n    this.config.maxSteps = parseInt(\r\n      this.getAttribute(\"max-steps\") || this.config.maxSteps,\r\n      10\r\n    );\r\n\r\n    this.config.initialStep = parseInt(\r\n      this.getAttribute(\"initial-step\") || this.config.initialStep,\r\n      10\r\n    );\r\n\r\n    this.config.debounceTime = parseInt(\r\n      this.getAttribute(\"debounce-time\") || this.config.debounceTime,\r\n      10\r\n    );\r\n\r\n    this.config.scrollSensitivity = parseInt(\r\n      this.getAttribute(\"scroll-sensitivity\") || this.config.scrollSensitivity,\r\n      10\r\n    );\r\n\r\n    this.config.animationSpeed =\r\n      this.getAttribute(\"animation-speed\") || this.config.animationSpeed;\r\n  }\r\n\r\n  /**\r\n   * Get CSS animation speed value\r\n   * @returns {string} CSS time value\r\n   */\r\n  getAnimationSpeed() {\r\n    const speeds = {\r\n      slow: \"0.6s\",\r\n      normal: \"0.3s\",\r\n      fast: \"0.15s\",\r\n    };\r\n    return speeds[this.config.animationSpeed] || speeds.normal;\r\n  }\r\n\r\n  /**\r\n   * Register event listeners\r\n   */\r\n  registerEvents() {\r\n    // Wheel event with throttle for better performance\r\n    this.boundHandleWheel = throttle(\r\n      this.handleWheel.bind(this),\r\n      this.config.debounceTime\r\n    );\r\n\r\n    // Keyboard navigation\r\n    this.boundHandleKeyboard = this.handleKeyboard.bind(this);\r\n\r\n    window.addEventListener(\"wheel\", this.boundHandleWheel, { passive: true });\r\n    window.addEventListener(\"keydown\", this.boundHandleKeyboard);\r\n  }\r\n\r\n  /**\r\n   * Handle wheel event\r\n   * @param {WheelEvent} event - Wheel event\r\n   */\r\n  handleWheel(event) {\r\n    const delta = Math.sign(event.deltaY);\r\n\r\n    // Accumulate scroll for smoother control\r\n    this.scrollAccumulator += Math.abs(event.deltaY);\r\n\r\n    if (this.scrollAccumulator >= this.config.scrollSensitivity) {\r\n      this.changeStep(delta);\r\n      this.scrollAccumulator = 0;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle keyboard events\r\n   * @param {KeyboardEvent} event - Keyboard event\r\n   */\r\n  handleKeyboard(event) {\r\n    switch (event.key) {\r\n      case \"ArrowUp\":\r\n      case \"ArrowLeft\":\r\n        event.preventDefault();\r\n        this.changeStep(-1);\r\n        break;\r\n      case \"ArrowDown\":\r\n      case \"ArrowRight\":\r\n        event.preventDefault();\r\n        this.changeStep(1);\r\n        break;\r\n      case \"Home\":\r\n        event.preventDefault();\r\n        this.goToStep(0);\r\n        break;\r\n      case \"End\":\r\n        event.preventDefault();\r\n        this.goToStep(this.config.maxSteps);\r\n        break;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Change animation step by delta\r\n   * @param {number} delta - Step change amount (+1 or -1)\r\n   */\r\n  changeStep(delta) {\r\n    const newStep = this.currentStep + delta;\r\n    this.goToStep(newStep);\r\n  }\r\n\r\n  /**\r\n   * Go to specific animation step\r\n   * @param {number} step - Target step\r\n   */\r\n  goToStep(step) {\r\n    // Clamp step to valid range\r\n    const clampedStep = Math.max(0, Math.min(step, this.config.maxSteps));\r\n\r\n    if (clampedStep === this.currentStep) {\r\n      return;\r\n    }\r\n\r\n    this.currentStep = clampedStep;\r\n    this.updateAnimation();\r\n\r\n    // Dispatch custom event\r\n    this.dispatchEvent(\r\n      new CustomEvent(\"step-change\", {\r\n        detail: {\r\n          step: this.currentStep,\r\n          maxSteps: this.config.maxSteps,\r\n          progress: this.currentStep / this.config.maxSteps,\r\n        },\r\n        bubbles: true,\r\n      })\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Update animation classes\r\n   */\r\n  updateAnimation() {\r\n    if (this.isAnimating) return;\r\n\r\n    this.isAnimating = true;\r\n\r\n    // Use requestAnimationFrame for smooth updates\r\n    requestAnimationFrame(() => {\r\n      this.animationItems.forEach((element) => {\r\n        // Remove all step classes\r\n        for (let i = 0; i <= this.config.maxSteps; i++) {\r\n          element.classList.remove(`es-animation-step-${i}`);\r\n          element.style = \"\";\r\n        }\r\n\r\n        // Add current and previous step classes\r\n        for (let i = 0; i <= this.currentStep; i++) {\r\n          element.classList.add(`es-animation-step-${i}`);\r\n          element.style = this.animationItems[i].getAttribute(`data-step-${i}`);\r\n        }\r\n\r\n        // Set data attribute for CSS targeting\r\n        element.setAttribute(\"data-step\", this.currentStep);\r\n      });\r\n\r\n      // Update container data attribute\r\n      this.setAttribute(\"data-current-step\", this.currentStep);\r\n\r\n      this.isAnimating = false;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Public API: Reset to initial step\r\n   */\r\n  reset() {\r\n    this.goToStep(this.config.initialStep);\r\n  }\r\n\r\n  /**\r\n   * Public API: Go to next step\r\n   */\r\n  next() {\r\n    this.changeStep(1);\r\n  }\r\n\r\n  /**\r\n   * Public API: Go to previous step\r\n   */\r\n  prev() {\r\n    this.changeStep(-1);\r\n  }\r\n\r\n  /**\r\n   * Public API: Get current step\r\n   * @returns {number} Current step\r\n   */\r\n  getCurrentStep() {\r\n    return this.currentStep;\r\n  }\r\n\r\n  /**\r\n   * Public API: Get progress percentage\r\n   * @returns {number} Progress (0-100)\r\n   */\r\n  getProgress() {\r\n    return (this.currentStep / this.config.maxSteps) * 100;\r\n  }\r\n\r\n  /**\r\n   * Cleanup event listeners\r\n   */\r\n  cleanup() {\r\n    if (this.boundHandleWheel) {\r\n      window.removeEventListener(\"wheel\", this.boundHandleWheel);\r\n    }\r\n    if (this.boundHandleKeyboard) {\r\n      window.removeEventListener(\"keydown\", this.boundHandleKeyboard);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Observed attributes for attribute change callbacks\r\n   */\r\n  static get observedAttributes() {\r\n    return [\"max-steps\", \"initial-step\", \"animation-speed\"];\r\n  }\r\n\r\n  /**\r\n   * Called when observed attributes change\r\n   */\r\n  attributeChangedCallback(name, oldValue, newValue) {\r\n    if (oldValue === newValue) return;\r\n\r\n    switch (name) {\r\n      case \"max-steps\":\r\n        this.config.maxSteps = parseInt(newValue, 10);\r\n        if (this.currentStep > this.config.maxSteps) {\r\n          this.goToStep(this.config.maxSteps);\r\n        }\r\n        break;\r\n      case \"initial-step\":\r\n        this.config.initialStep = parseInt(newValue, 10);\r\n        break;\r\n      case \"animation-speed\":\r\n        this.config.animationSpeed = newValue;\r\n        this.style.setProperty(\"--animation-speed\", this.getAnimationSpeed());\r\n        break;\r\n    }\r\n  }\r\n}\r\n\r\n// Register custom element\r\ncustomElements.define(\"es-animation\", EsAnimation);\r\n\r\n// Hot reload for development\r\nnew EventSource(\"/esbuild\").addEventListener(\"change\", () => location.reload());\r\n"],
  "mappings": "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",
  "names": ["throttle", "func", "limit", "inThrottle", "args", "EsAnimation", "speeds", "event", "delta", "newStep", "step", "clampedStep", "element", "i", "name", "oldValue", "newValue"]
}
