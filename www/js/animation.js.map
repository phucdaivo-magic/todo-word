{
  "version": 3,
  "sources": ["../../src/js/animation.jsx"],
  "sourcesContent": ["/**\n * ES Animation Component\n * A custom web component for scroll-based animations\n *\n * Attributes:\n * - max-steps: Maximum animation steps (default: 10)\n * - initial-step: Starting step (default: 0)\n * - debounce-time: Debounce delay in ms (default: 50)\n * - scroll-sensitivity: Pixels to scroll per step (default: 100)\n * - animation-speed: Animation transition speed (default: 'normal')\n *\n * Usage:\n * <es-animation max-steps=\"10\" initial-step=\"0\">\n *   <div class=\"es-animation-item\">Content</div>\n * </es-animation>\n */\n\n/**\n * Debounce utility function\n * Delays function execution until after wait time has elapsed\n * @param {Function} func - Function to debounce\n * @param {number} wait - Wait time in milliseconds\n * @returns {Function} Debounced function\n */\nconst debounce = (func, wait) => {\n  let timeout;\n  return function executedFunction(...args) {\n    const later = () => {\n      clearTimeout(timeout);\n      func.apply(this, args);\n    };\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n};\n\n/**\n * Throttle utility function\n * Ensures function is called at most once per specified time period\n * @param {Function} func - Function to throttle\n * @param {number} limit - Time limit in milliseconds\n * @returns {Function} Throttled function\n */\nconst throttle = (func, limit) => {\n  let inThrottle;\n  return function (...args) {\n    if (!inThrottle) {\n      func.apply(this, args);\n      inThrottle = true;\n      setTimeout(() => (inThrottle = false), limit);\n    }\n  };\n};\n\nclass EsAnimation extends HTMLElement {\n  constructor() {\n    super();\n\n    // Configuration\n    this.config = {\n      maxSteps: 10,\n      initialStep: 0,\n      debounceTime: 50,\n      scrollSensitivity: 100,\n      animationSpeed: \"normal\",\n    };\n\n    // State\n    this.currentStep = 0;\n    this.isAnimating = false;\n    this.animationItems = [];\n\n    // Bound methods for event listeners\n    this.boundHandleWheel = null;\n    this.boundHandleKeyboard = null;\n\n    // Performance tracking\n    this.lastScrollTime = 0;\n    this.scrollAccumulator = 0;\n  }\n\n  /**\n   * Called when element is inserted into DOM\n   */\n  connectedCallback() {\n    this.init();\n    this.registerEvents();\n    this.updateAnimation();\n\n    if (this.hasAttribute(\"debug\")) {\n      console.log(\"ES Animation initialized:\", {\n        config: this.config,\n        items: this.animationItems.length,\n      });\n    }\n  }\n\n  /**\n   * Called when element is removed from DOM\n   */\n  disconnectedCallback() {\n    this.cleanup();\n  }\n\n  /**\n   * Initialize component\n   */\n  init() {\n    // Parse attributes\n    this.parseAttributes();\n\n    // Get animation items\n    this.animationItems = Array.from(\n      this.querySelectorAll(\".es-animation-item\")\n    );\n\n    if (this.animationItems.length === 0) {\n      console.warn(\"ES Animation: No .es-animation-item elements found\");\n    }\n\n    // Set initial step\n    this.currentStep = this.config.initialStep;\n\n    // Add container class\n    this.classList.add(\"es-animation-container\");\n\n    // Set animation speed\n    this.style.setProperty(\"--animation-speed\", this.getAnimationSpeed());\n  }\n\n  /**\n   * Parse component attributes\n   */\n  parseAttributes() {\n    this.config.maxSteps = parseInt(\n      this.getAttribute(\"max-steps\") || this.config.maxSteps,\n      10\n    );\n\n    this.config.initialStep = parseInt(\n      this.getAttribute(\"initial-step\") || this.config.initialStep,\n      10\n    );\n\n    this.config.debounceTime = parseInt(\n      this.getAttribute(\"debounce-time\") || this.config.debounceTime,\n      10\n    );\n\n    this.config.scrollSensitivity = parseInt(\n      this.getAttribute(\"scroll-sensitivity\") || this.config.scrollSensitivity,\n      10\n    );\n\n    this.config.animationSpeed =\n      this.getAttribute(\"animation-speed\") || this.config.animationSpeed;\n  }\n\n  /**\n   * Get CSS animation speed value\n   * @returns {string} CSS time value\n   */\n  getAnimationSpeed() {\n    const speeds = {\n      slow: \"0.6s\",\n      normal: \"0.3s\",\n      fast: \"0.15s\",\n    };\n    return speeds[this.config.animationSpeed] || speeds.normal;\n  }\n\n  /**\n   * Register event listeners\n   */\n  registerEvents() {\n    // Wheel event with throttle for better performance\n    this.boundHandleWheel = throttle(\n      this.handleWheel.bind(this),\n      this.config.debounceTime\n    );\n\n    // Keyboard navigation\n    this.boundHandleKeyboard = this.handleKeyboard.bind(this);\n\n    window.addEventListener(\"wheel\", this.boundHandleWheel, { passive: true });\n    window.addEventListener(\"keydown\", this.boundHandleKeyboard);\n  }\n\n  /**\n   * Handle wheel event\n   * @param {WheelEvent} event - Wheel event\n   */\n  handleWheel(event) {\n    const delta = Math.sign(event.deltaY);\n\n    // Accumulate scroll for smoother control\n    this.scrollAccumulator += Math.abs(event.deltaY);\n\n    if (this.scrollAccumulator >= this.config.scrollSensitivity) {\n      this.changeStep(delta);\n      this.scrollAccumulator = 0;\n    }\n  }\n\n  /**\n   * Handle keyboard events\n   * @param {KeyboardEvent} event - Keyboard event\n   */\n  handleKeyboard(event) {\n    switch (event.key) {\n      case \"ArrowUp\":\n      case \"ArrowLeft\":\n        event.preventDefault();\n        this.changeStep(-1);\n        break;\n      case \"ArrowDown\":\n      case \"ArrowRight\":\n        event.preventDefault();\n        this.changeStep(1);\n        break;\n      case \"Home\":\n        event.preventDefault();\n        this.goToStep(0);\n        break;\n      case \"End\":\n        event.preventDefault();\n        this.goToStep(this.config.maxSteps);\n        break;\n    }\n  }\n\n  /**\n   * Change animation step by delta\n   * @param {number} delta - Step change amount (+1 or -1)\n   */\n  changeStep(delta) {\n    const newStep = this.currentStep + delta;\n    this.goToStep(newStep);\n  }\n\n  /**\n   * Go to specific animation step\n   * @param {number} step - Target step\n   */\n  goToStep(step) {\n    // Clamp step to valid range\n    const clampedStep = Math.max(0, Math.min(step, this.config.maxSteps));\n\n    if (clampedStep === this.currentStep) {\n      return;\n    }\n\n    this.currentStep = clampedStep;\n    this.updateAnimation();\n\n    // Dispatch custom event\n    this.dispatchEvent(\n      new CustomEvent(\"step-change\", {\n        detail: {\n          step: this.currentStep,\n          maxSteps: this.config.maxSteps,\n          progress: this.currentStep / this.config.maxSteps,\n        },\n        bubbles: true,\n      })\n    );\n  }\n\n  /**\n   * Update animation classes\n   */\n  updateAnimation() {\n    if (this.isAnimating) return;\n\n    this.isAnimating = true;\n\n    // Use requestAnimationFrame for smooth updates\n    requestAnimationFrame(() => {\n      this.animationItems.forEach((element) => {\n        // Remove all step classes\n        for (let i = 0; i <= this.config.maxSteps; i++) {\n          element.classList.remove(`es-animation-step-${i}`);\n          element.style = \"\";\n        }\n\n        // Add current and previous step classes\n        for (let i = 0; i <= this.currentStep; i++) {\n          element.classList.add(`es-animation-step-${i}`);\n          element.style = this.animationItems[i].getAttribute(`data-step-${i}`);\n        }\n\n        // Set data attribute for CSS targeting\n        element.setAttribute(\"data-step\", this.currentStep);\n      });\n\n      // Update container data attribute\n      this.setAttribute(\"data-current-step\", this.currentStep);\n\n      this.isAnimating = false;\n    });\n  }\n\n  /**\n   * Public API: Reset to initial step\n   */\n  reset() {\n    this.goToStep(this.config.initialStep);\n  }\n\n  /**\n   * Public API: Go to next step\n   */\n  next() {\n    this.changeStep(1);\n  }\n\n  /**\n   * Public API: Go to previous step\n   */\n  prev() {\n    this.changeStep(-1);\n  }\n\n  /**\n   * Public API: Get current step\n   * @returns {number} Current step\n   */\n  getCurrentStep() {\n    return this.currentStep;\n  }\n\n  /**\n   * Public API: Get progress percentage\n   * @returns {number} Progress (0-100)\n   */\n  getProgress() {\n    return (this.currentStep / this.config.maxSteps) * 100;\n  }\n\n  /**\n   * Cleanup event listeners\n   */\n  cleanup() {\n    if (this.boundHandleWheel) {\n      window.removeEventListener(\"wheel\", this.boundHandleWheel);\n    }\n    if (this.boundHandleKeyboard) {\n      window.removeEventListener(\"keydown\", this.boundHandleKeyboard);\n    }\n  }\n\n  /**\n   * Observed attributes for attribute change callbacks\n   */\n  static get observedAttributes() {\n    return [\"max-steps\", \"initial-step\", \"animation-speed\"];\n  }\n\n  /**\n   * Called when observed attributes change\n   */\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case \"max-steps\":\n        this.config.maxSteps = parseInt(newValue, 10);\n        if (this.currentStep > this.config.maxSteps) {\n          this.goToStep(this.config.maxSteps);\n        }\n        break;\n      case \"initial-step\":\n        this.config.initialStep = parseInt(newValue, 10);\n        break;\n      case \"animation-speed\":\n        this.config.animationSpeed = newValue;\n        this.style.setProperty(\"--animation-speed\", this.getAnimationSpeed());\n        break;\n    }\n  }\n}\n\n// Register custom element\ncustomElements.define(\"es-animation\", EsAnimation);\n\n// Hot reload for development\nnew EventSource(\"/esbuild\").addEventListener(\"change\", () => location.reload());\n"],
  "mappings": "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",
  "names": ["throttle", "func", "limit", "inThrottle", "args", "EsAnimation", "speeds", "event", "delta", "newStep", "step", "clampedStep", "element", "i", "name", "oldValue", "newValue"]
}
