{
  "version": 3,
  "sources": ["../../src/js/select.js"],
  "sourcesContent": ["import a from \"css-magi\"\nclass Select {\n    constructor(element) {\n        this.options = {\n            classNameDropdownPopup: 'select-dropdown-popup',\n            classNameDropdownOption: 'select-dropdown-option',\n            classNameDropdownOpen: 'select-dropdown-open',\n            ...JSON.parse(element.dataset.options || '{}'),\n        };\n        const $dropdownInput = this.createDropdownInput(element);\n        element.after($dropdownInput);\n\n\n        this.createDropdownPopup({\n            $dropdownInput,\n            element,\n        });\n    }\n\n    getBoundingClientRect(element) {\n        return {\n            width: element.getBoundingClientRect().width,\n            height: element.getBoundingClientRect().height,\n            bottom: element.getBoundingClientRect().bottom,\n            left: element.getBoundingClientRect().left,\n            widthCss: element.getBoundingClientRect().width + 'px',\n            heightCss: element.getBoundingClientRect().height + 'px',\n            bottomCss: element.getBoundingClientRect().bottom + 'px',\n            leftCss: element.getBoundingClientRect().left + 'px',\n        };\n    }\n\n    setStyle($element, styles) {\n        Object.keys(styles).forEach(key => {\n            $element.style[key] = styles[key];\n        });\n    }\n\n    createDropdownInput(element) {\n        const { widthCss, heightCss } = this.getBoundingClientRect(element);\n        const $input = document.createElement('div');\n        $input.classList.add('select-dropdown-input', ...Array.from(element.classList));\n\n        this.setStyle($input, {\n            width: widthCss,\n            height: heightCss,\n            marginTop: `-${heightCss}`,\n            opacity: '0',\n            boxSizing: 'border-box',\n        });\n\n        return $input;\n    }\n\n    createDropdownPopup({ $dropdownInput, element }) {\n        const { classNameDropdownPopup, classNameDropdownOption, classNameDropdownOpen } = this.options;\n        const $dropdownPopup = document.createElement('div');\n        $dropdownPopup.classList.add(classNameDropdownPopup);\n        $dropdownInput.textContent = element.options[0].text;\n\n        const updatePositionDropdown = (show) => {\n            const { bottomCss, leftCss, widthCss } = this.getBoundingClientRect(element);\n            this.setStyle($dropdownPopup, {\n                display: 'block',\n                top: bottomCss,\n                left: leftCss,\n                width: widthCss,\n                position: 'fixed',\n                boxSizing: 'border-box',\n                display: 'none',\n            });\n\n            if (typeof show === 'boolean') {\n                [element, $dropdownInput, $dropdownPopup].forEach(({ classList }) => {\n                    classList.toggle(classNameDropdownOpen, show);\n                });\n                $dropdownPopup.style.display = show ? 'block' : 'none';\n            }\n        }\n\n        const onSelectOption = ({ option }) => {\n            // Update selected option\n            option.selected = true;\n            // Update text\n            $dropdownInput.textContent = option.text;\n            $dropdownInput.dataset.value = option.value;\n\n            element.dispatchEvent(new Event('change'));\n            // Update selected option in the dropdown popup\n            $dropdownPopup.querySelectorAll(`.${classNameDropdownOption}`).forEach(dropdownOption => {\n                dropdownOption.dataset.selected = dropdownOption.DOMElement.selected;\n            });\n        }\n\n        Array.from(element.options).forEach(option => {\n            const { value, text } = option;\n            const $option = document.createElement('div');\n\n            $option.classList.add(classNameDropdownOption);\n            $option.textContent = text;\n            $option.dataset.value = value;\n            $option.dataset.binding = 'option';\n            $option.dataset.text = text;\n\n            // Register event listeners for the option\n            $option.DOMElement = option;\n            $option.addEventListener('click', () => {\n                $dropdownInput.textContent = text;\n                $dropdownInput.dataset.value = value;\n                updatePositionDropdown(false);\n                onSelectOption({\n                    option: option,\n                });\n            });\n\n            $dropdownPopup.appendChild($option);\n        });\n\n        const registerEventListeners = () => {\n            $dropdownInput.addEventListener('click', () => {\n                updatePositionDropdown(!element.classList.contains(classNameDropdownOpen));\n            });\n            // click outside of the dropdown list\n            document.addEventListener(\"click\", (event) => {\n                if (!$dropdownPopup.contains(event.target) && !$dropdownInput.contains(event.target)) {\n                    updatePositionDropdown(false);\n                }\n            });\n\n            document.addEventListener('keydown', (event) => {\n                if (event.key === 'Escape') {\n                    updatePositionDropdown(false);\n                }\n            });\n\n            document.addEventListener('scroll', () => {\n                updatePositionDropdown();\n            });\n\n            document.addEventListener('resize', () => {\n                updatePositionDropdown();\n            });\n        }\n\n        registerEventListeners();\n        document.body.appendChild($dropdownPopup);\n    }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    document.querySelectorAll('.select-dropdown').forEach(select => {\n        new Select(select);\n    });\n});\n\nnew EventSource('/esbuild').addEventListener('change', () => {\n    location.reload();\n});\n"],
  "mappings": "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",
  "names": ["Select", "element", "$dropdownInput", "$element", "styles", "key", "widthCss", "heightCss", "$input", "classNameDropdownPopup", "classNameDropdownOption", "classNameDropdownOpen", "$dropdownPopup", "updatePositionDropdown", "show", "bottomCss", "leftCss", "classList", "onSelectOption", "option", "dropdownOption", "value", "text", "$option", "event", "select"]
}
