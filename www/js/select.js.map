{
  "version": 3,
  "sources": ["../../src/js/select.js"],
  "sourcesContent": ["import a from \"css-magi\"\r\nclass Select {\r\n    constructor(element) {\r\n        this.options = {\r\n            classNameDropdownPopup: 'select-dropdown-popup',\r\n            classNameDropdownOption: 'select-dropdown-option',\r\n            classNameDropdownOpen: 'select-dropdown-open',\r\n            ...JSON.parse(element.dataset.options || '{}'),\r\n        };\r\n        const $dropdownInput = this.createDropdownInput(element);\r\n        element.after($dropdownInput);\r\n\r\n\r\n        this.createDropdownPopup({\r\n            $dropdownInput,\r\n            element,\r\n        });\r\n    }\r\n\r\n    getBoundingClientRect(element) {\r\n        return {\r\n            width: element.getBoundingClientRect().width,\r\n            height: element.getBoundingClientRect().height,\r\n            bottom: element.getBoundingClientRect().bottom,\r\n            left: element.getBoundingClientRect().left,\r\n            widthCss: element.getBoundingClientRect().width + 'px',\r\n            heightCss: element.getBoundingClientRect().height + 'px',\r\n            bottomCss: element.getBoundingClientRect().bottom + 'px',\r\n            leftCss: element.getBoundingClientRect().left + 'px',\r\n        };\r\n    }\r\n\r\n    setStyle($element, styles) {\r\n        Object.keys(styles).forEach(key => {\r\n            $element.style[key] = styles[key];\r\n        });\r\n    }\r\n\r\n    createDropdownInput(element) {\r\n        const { widthCss, heightCss } = this.getBoundingClientRect(element);\r\n        const $input = document.createElement('div');\r\n        $input.classList.add('select-dropdown-input', ...Array.from(element.classList));\r\n\r\n        this.setStyle($input, {\r\n            width: widthCss,\r\n            height: heightCss,\r\n            marginTop: `-${heightCss}`,\r\n            opacity: '0',\r\n            boxSizing: 'border-box',\r\n        });\r\n\r\n        return $input;\r\n    }\r\n\r\n    createDropdownPopup({ $dropdownInput, element }) {\r\n        const { classNameDropdownPopup, classNameDropdownOption, classNameDropdownOpen } = this.options;\r\n        const $dropdownPopup = document.createElement('div');\r\n        $dropdownPopup.classList.add(classNameDropdownPopup);\r\n        $dropdownInput.textContent = element.options[0].text;\r\n\r\n        const updatePositionDropdown = (show) => {\r\n            const { bottomCss, leftCss, widthCss } = this.getBoundingClientRect(element);\r\n            this.setStyle($dropdownPopup, {\r\n                top: bottomCss,\r\n                left: leftCss,\r\n                width: widthCss,\r\n                position: 'fixed',\r\n                boxSizing: 'border-box',\r\n                display: 'none',\r\n            });\r\n\r\n            if (typeof show === 'boolean') {\r\n                [element, $dropdownInput, $dropdownPopup].forEach(({ classList }) => {\r\n                    classList.toggle(classNameDropdownOpen, show);\r\n                });\r\n                $dropdownPopup.style.display = show ? 'block' : 'none';\r\n            }\r\n        }\r\n\r\n        const onSelectOption = ({ option }) => {\r\n            // Update selected option\r\n            option.selected = true;\r\n            // Update text\r\n            $dropdownInput.textContent = option.text;\r\n            $dropdownInput.dataset.value = option.value;\r\n\r\n            element.dispatchEvent(new Event('change'));\r\n            // Update selected option in the dropdown popup\r\n            $dropdownPopup.querySelectorAll(`.${classNameDropdownOption}`).forEach(dropdownOption => {\r\n                dropdownOption.dataset.selected = dropdownOption.DOMElement.selected;\r\n            });\r\n        }\r\n\r\n        Array.from(element.options).forEach(option => {\r\n            const { value, text } = option;\r\n            const $option = document.createElement('div');\r\n\r\n            $option.classList.add(classNameDropdownOption);\r\n            $option.textContent = text;\r\n            $option.dataset.value = value;\r\n            $option.dataset.binding = 'option';\r\n            $option.dataset.text = text;\r\n\r\n            // Register event listeners for the option\r\n            $option.DOMElement = option;\r\n            $option.addEventListener('click', () => {\r\n                $dropdownInput.textContent = text;\r\n                $dropdownInput.dataset.value = value;\r\n                updatePositionDropdown(false);\r\n                onSelectOption({\r\n                    option: option,\r\n                });\r\n            });\r\n\r\n            $dropdownPopup.appendChild($option);\r\n        });\r\n\r\n        const registerEventListeners = () => {\r\n            $dropdownInput.addEventListener('click', () => {\r\n                updatePositionDropdown(!element.classList.contains(classNameDropdownOpen));\r\n            });\r\n            // click outside of the dropdown list\r\n            document.addEventListener(\"click\", (event) => {\r\n                if (!$dropdownPopup.contains(event.target) && !$dropdownInput.contains(event.target)) {\r\n                    updatePositionDropdown(false);\r\n                }\r\n            });\r\n\r\n            document.addEventListener('keydown', (event) => {\r\n                if (event.key === 'Escape') {\r\n                    updatePositionDropdown(false);\r\n                }\r\n            });\r\n\r\n            document.addEventListener('scroll', () => {\r\n                updatePositionDropdown();\r\n            });\r\n\r\n            document.addEventListener('resize', () => {\r\n                updatePositionDropdown();\r\n            });\r\n        }\r\n\r\n        registerEventListeners();\r\n        document.body.appendChild($dropdownPopup);\r\n    }\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    document.querySelectorAll('.select-dropdown').forEach(select => {\r\n        new Select(select);\r\n    });\r\n});\r\n\r\nnew EventSource('/esbuild').addEventListener('change', () => {\r\n    location.reload();\r\n});\r\n"],
  "mappings": "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",
  "names": ["Select", "element", "$dropdownInput", "$element", "styles", "key", "widthCss", "heightCss", "$input", "classNameDropdownPopup", "classNameDropdownOption", "classNameDropdownOpen", "$dropdownPopup", "updatePositionDropdown", "show", "bottomCss", "leftCss", "classList", "onSelectOption", "option", "dropdownOption", "value", "text", "$option", "event", "select"]
}
