{
  "version": 3,
  "sources": ["../../src/js/masonry.js"],
  "sourcesContent": ["document.addEventListener(\"DOMContentLoaded\", () => {\r\n\tmasonry();\r\n});\r\n\r\nconst masonry = () => {\r\n\tconst $masonry = document.querySelector(\".masonry\");\r\n\tconst $masonryItems = document.querySelectorAll(\".masonry-item\");\r\n\tconst masonryBoundingClientRect = $masonry.getBoundingClientRect();\r\n\r\n\tconst { push, get } = useMasonry();\r\n\r\n\tArray.from($masonryItems)\r\n\t\t.map((item) => {\r\n\t\t\treturn new Promise((resolve) => {\r\n\t\t\t\tconst img = item.querySelector(\"img\");\r\n\t\t\t\tif (img.complete) {\r\n\t\t\t\t\tresolve(item);\r\n\t\t\t\t} else {\r\n\t\t\t\t\timg.onload = () => resolve(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t})\r\n\t\t.forEach((item, index) => {\r\n\t\t\titem.then((item) => {\r\n\t\t\t\tconst itemMasonry = get();\r\n\t\t\t\tconst left =\r\n\t\t\t\t\titemMasonry.index || itemMasonry.index === 0\r\n\t\t\t\t\t\t? itemMasonry.left\r\n\t\t\t\t\t\t: itemMasonry.left + itemMasonry.width;\r\n\r\n\t\t\t\tconst top =\r\n\t\t\t\t\titemMasonry.index || itemMasonry.index === 0\r\n\t\t\t\t\t\t? itemMasonry.top + itemMasonry.height\r\n\t\t\t\t\t\t: itemMasonry.top;\r\n\r\n\t\t\t\titem.style.setProperty(\"position\", \"absolute\");\r\n\t\t\t\titem.style.setProperty(\"top\", `${top}px`);\r\n\t\t\t\titem.style.setProperty(\"left\", `${left}px`);\r\n\t\t\t\titem.style.setProperty(\"z-index\", `${index + 1}`);\r\n\t\t\t\titem.style.setProperty(\"opacity\", `1`);\r\n\r\n\t\t\t\tconst itemRect = item.getBoundingClientRect();\r\n\r\n\t\t\t\tconst width = itemRect.width;\r\n\t\t\t\tconst height = itemRect.height;\r\n\r\n\t\t\t\tpush({ top, left, width, height, item }, itemMasonry.index);\r\n\t\t\t}, index * 1);\r\n\t\t});\r\n};\r\n\r\nconst useMasonry = () => {\r\n\tlet items = [];\r\n\tconst push = (item, index) => {\r\n\t\tif (index || index === 0) {\r\n\t\t\titems = items.map((_item, _index) => {\r\n\t\t\t\tif (_index === index) {\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t}\r\n\t\t\t\treturn _item;\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\titems.push(item);\r\n\t\t}\r\n\r\n\t\tconsole.log(items);\r\n\t};\r\n\r\n\tconst get = () => {\r\n\t\tif (items.length === 0) {\r\n\t\t\treturn {\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tleft: 0,\r\n\t\t\t\twidth: 0,\r\n\t\t\t\theight: 0,\r\n\t\t\t};\r\n\t\t} else if (items.length < 3) {\r\n\t\t\treturn [...items].pop();\r\n\t\t} else {\r\n\t\t\tconst topLast = items.reduce(\r\n\t\t\t\t(acc, cur, index) => {\r\n\t\t\t\t\tconsole.log(cur, acc);\r\n\r\n\t\t\t\t\tif (cur.top + cur.height <= acc.top + acc.height) {\r\n\t\t\t\t\t\treturn { ...cur, index };\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn acc;\r\n\t\t\t\t},\r\n\t\t\t\t{ ...items[0], index: 0 }\r\n\t\t\t);\r\n\r\n\t\t\tconsole.log(topLast);\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...topLast,\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n\r\n\treturn { push, get };\r\n};\r\n\r\nnew EventSource(\"/esbuild\").addEventListener(\"change\", () => location.reload());\r\n"],
  "mappings": "MAAA,SAAS,iBAAiB,mBAAoB,IAAM,CACnDA,EAAQ,CACT,CAAC,EAED,IAAMA,EAAU,IAAM,CACrB,IAAMC,EAAW,SAAS,cAAc,UAAU,EAC5CC,EAAgB,SAAS,iBAAiB,eAAe,EACzDC,EAA4BF,EAAS,sBAAsB,EAE3D,CAAE,KAAAG,EAAM,IAAAC,CAAI,EAAIC,EAAW,EAEjC,MAAM,KAAKJ,CAAa,EACtB,IAAKK,GACE,IAAI,QAASC,GAAY,CAC/B,IAAMC,EAAMF,EAAK,cAAc,KAAK,EAChCE,EAAI,SACPD,EAAQD,CAAI,EAEZE,EAAI,OAAS,IAAMD,EAAQD,CAAI,CAEjC,CAAC,CACD,EACA,QAAQ,CAACA,EAAMG,IAAU,CACzBH,EAAK,KAAMA,GAAS,CACnB,IAAMI,EAAcN,EAAI,EAClBO,EACLD,EAAY,OAASA,EAAY,QAAU,EACxCA,EAAY,KACZA,EAAY,KAAOA,EAAY,MAE7BE,EACLF,EAAY,OAASA,EAAY,QAAU,EACxCA,EAAY,IAAMA,EAAY,OAC9BA,EAAY,IAEhBJ,EAAK,MAAM,YAAY,WAAY,UAAU,EAC7CA,EAAK,MAAM,YAAY,MAAO,GAAGM,CAAG,IAAI,EACxCN,EAAK,MAAM,YAAY,OAAQ,GAAGK,CAAI,IAAI,EAC1CL,EAAK,MAAM,YAAY,UAAW,GAAGG,EAAQ,CAAC,EAAE,EAChDH,EAAK,MAAM,YAAY,UAAW,GAAG,EAErC,IAAMO,EAAWP,EAAK,sBAAsB,EAEtCQ,EAAQD,EAAS,MACjBE,EAASF,EAAS,OAExBV,EAAK,CAAE,IAAAS,EAAK,KAAAD,EAAM,MAAAG,EAAO,OAAAC,EAAQ,KAAAT,CAAK,EAAGI,EAAY,KAAK,CAC3D,EAAGD,EAAQ,CAAC,CACb,CAAC,CACH,EAEMJ,EAAa,IAAM,CACxB,IAAIW,EAAQ,CAAC,EAgDb,MAAO,CAAE,KA/CI,CAACV,EAAMG,IAAU,CACzBA,GAASA,IAAU,EACtBO,EAAQA,EAAM,IAAI,CAACC,EAAOC,IACrBA,IAAWT,EACPH,EAEDW,CACP,EAEDD,EAAM,KAAKV,CAAI,EAGhB,QAAQ,IAAIU,CAAK,CAClB,EAkCe,IAhCH,IAAM,CACjB,GAAIA,EAAM,SAAW,EACpB,MAAO,CACN,IAAK,EACL,KAAM,EACN,MAAO,EACP,OAAQ,CACT,EACM,GAAIA,EAAM,OAAS,EACzB,MAAO,CAAC,GAAGA,CAAK,EAAE,IAAI,EAChB,CACN,IAAMG,EAAUH,EAAM,OACrB,CAACI,EAAKC,EAAKZ,KACV,QAAQ,IAAIY,EAAKD,CAAG,EAEhBC,EAAI,IAAMA,EAAI,QAAUD,EAAI,IAAMA,EAAI,OAClC,CAAE,GAAGC,EAAK,MAAAZ,CAAM,EAGjBW,GAER,CAAE,GAAGJ,EAAM,CAAC,EAAG,MAAO,CAAE,CACzB,EAEA,eAAQ,IAAIG,CAAO,EAEZ,CACN,GAAGA,CACJ,CACD,CACD,CAEmB,CACpB,EAEA,IAAI,YAAY,UAAU,EAAE,iBAAiB,SAAU,IAAM,SAAS,OAAO,CAAC",
  "names": ["masonry", "$masonry", "$masonryItems", "masonryBoundingClientRect", "push", "get", "useMasonry", "item", "resolve", "img", "index", "itemMasonry", "left", "top", "itemRect", "width", "height", "items", "_item", "_index", "topLast", "acc", "cur"]
}
