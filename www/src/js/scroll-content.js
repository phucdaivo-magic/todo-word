(()=>{new EventSource("/esbuild").addEventListener("change",()=>location.reload());document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-component='HorizontalScrolling']").forEach(e=>{new r(e)})});var n={INTERSECTING:{threshold:.5},WIDTH_SCROLL_CONTENT_OFFSET:56/2,CSS:{TRANSITION:"transform 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94)",SCROLL_LEFT_PROPERTY:"--scroll-content-after-left"}},r=class{constructor(e){this.$element=e,this.$imageWrapper=this.$element.querySelector(".image-wrapper"),this.$scrollContent=this.$element.querySelector(".scroll-content"),this.isDragging=!1,this.scrollLeft=0,this.maxScrollLeft=this.getMaxScrollLeft(),this.runAnimation=this.runAnimation(),this.runAnimation.init(),this.shouldRegisterEvents(()=>{this.initStyles(),this.onIntersecting()})}getMaxScrollLeft(){return this.$imageWrapper.offsetWidth-this.$scrollContent.clientWidth+n.WIDTH_SCROLL_CONTENT_OFFSET}initStyles(){this.$scrollContent.style.setProperty("overflow","hidden"),this.$scrollContent.style.setProperty("cursor","move")}runAnimation(){return{init:()=>new Promise(s=>{let t=this.$imageWrapper.getBoundingClientRect().width-60;this.$imageWrapper.style.setProperty("transform",`translateX(${-t}px)`),this.$scrollContent.style.setProperty(n.CSS.SCROLL_LEFT_PROPERTY,`${-t}px`),s()}),start:()=>new Promise(s=>{setTimeout(()=>{this.$imageWrapper.style.setProperty("transition",n.CSS.TRANSITION),this.$scrollContent.style.setProperty("transition",n.CSS.TRANSITION),this.$imageWrapper.style.setProperty("transform","translateX(0px)"),this.$scrollContent.style.setProperty(n.CSS.SCROLL_LEFT_PROPERTY,0)},500),setTimeout(()=>{this.$imageWrapper.style.removeProperty("transition"),this.$scrollContent.style.removeProperty("transition"),s()},1700)})}}shouldRegisterEvents(e){this.maxScrollLeft>0&&e()}registerEvents(){this.registerMouseEventListeners(),this.registerTouchEventListeners()}onIntersecting(){new IntersectionObserver((i,s)=>{i.forEach(t=>{t.isIntersecting&&(this.runAnimation.start().then(()=>this.registerEvents()),s.unobserve(this.$element))})},n.INTERSECTING).observe(this.$element)}registerMouseEventListeners(){let e=t=>{t.preventDefault(),this.startX=t.clientX,this.isDragging=!0},i=t=>{this.isDragging&&(this.endX=t.clientX,this.distance=this.endX-this.startX,this.updateView())},s=t=>{t.preventDefault(),this.endX=t.clientX,this.scrollLeft=Math.max(Math.min(this.scrollLeft+this.distance,0),-this.maxScrollLeft),this.distance=0,this.updateView(),this.isDragging=!1};this.$element.addEventListener("mousedown",e),this.$element.addEventListener("mousemove",i),this.$element.addEventListener("mouseup",s),this.$element.addEventListener("mouseleave",s)}registerTouchEventListeners(){let e=t=>{t.preventDefault(),this.startX=t.touches[0].clientX,this.isDragging=!0},i=t=>{this.isDragging&&(this.endX=t.touches[0].clientX,this.distance=this.endX-this.startX,this.updateView())},s=t=>{t.preventDefault(),this.endX=t.changedTouches[0].clientX,this.deltaX=this.endX-this.startX,this.startX=null,this.scrollLeft=Math.max(Math.min(this.scrollLeft+this.distance,0),-this.maxScrollLeft),this.distance=0,this.updateView(),this.isDragging=!1};this.$element.addEventListener("touchstart",e),this.$element.addEventListener("touchmove",i),this.$element.addEventListener("touchend",s)}updateView(){let e=this.scrollLeft+this.distance;e=Math.min(e,0),e=Math.max(e,-this.maxScrollLeft),this.$imageWrapper.style.setProperty("transform",`translateX(${e}px)`),this.$scrollContent.style.setProperty("--scroll-content-after-left",`${e}px`)}};})();
//# sourceMappingURL=scroll-content.js.map
